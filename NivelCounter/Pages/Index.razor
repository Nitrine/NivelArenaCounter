@page "/"

<div class="card-image-wrapper">
    <img src="@CurrentLeaderImage" class="leader-card" />
</div>

<div class="top-display">
    <span class="top-value">@TotalSize</span>
    <span class="top-divider">/</span>
    <span class="top-value">@Cost</span>
</div>

<div class="row-two">
    <!-- 리더 레벨 -->
    <div class="mini-box">
        <div class="mini-title">LV</div>
        <div class="mini-controls">
            <button @onclick="() => LeaderLevel++">+</button>
            <span class="mini-number">@LeaderLevel</span>
            <button @onclick="() => LeaderLevel = Math.Max(0, LeaderLevel - 1)">-</button>
        </div>
    </div>

    <!-- 데미지 -->
    <div class="mini-box">
        <div class="mini-title">DMG</div>
        <div class="mini-controls">
            <button @onclick="() => Damage++">+</button>
            <span class="mini-number">@Damage</span>
            <button @onclick="() => Damage = Math.Max(0, Damage - 1)">-</button>
        </div>
    </div>
</div>

<!-- 유닛 / 스킬 / 무기 -->
<div class="unit-row">
    <div class="unit-box">
        <div class="icon">👤</div>
        <div class="unit-controls">
            <button @onclick="() => UnitCost1 = Math.Max(0, UnitCost1 - 1)">-</button>
            <span>@UnitCost1</span>
            <button @onclick="() => UnitCost1++">+</button>
        </div>
    </div>

    <div class="unit-box">
        <div class="icon">⛰️</div>
        <div class="unit-controls">
            <button @onclick="() => UnitCost2 = Math.Max(0, UnitCost2 - 1)">-</button>
            <span>@UnitCost2</span>
            <button @onclick="() => UnitCost2++">+</button>
        </div>
    </div>

    <div class="unit-box">
        <div class="icon">⚡</div>
        <div class="unit-controls">
            <button @onclick="() => UnitCost3 = Math.Max(0, UnitCost3 - 1)">-</button>
            <span>@UnitCost3</span>
            <button @onclick="() => UnitCost3++">+</button>
        </div>
    </div>
</div>

<div class="unit-row">
    <div class="unit-box">
        <div class="icon">⭐</div>
        <div class="unit-controls">
            <button @onclick="() => SkillCost = Math.Max(0, SkillCost - 1)">-</button>
            <span>@SkillCost</span>
            <button @onclick="() => SkillCost++">+</button>
        </div>
    </div>

    <div class="unit-box">
        <div class="icon">🗡️</div>
        <div class="unit-controls">
            <button @onclick="() => WeaponCost = Math.Max(0, WeaponCost - 1)">-</button>
            <span>@WeaponCost</span>
            <button @onclick="() => WeaponCost++">+</button>
        </div>
    </div>
</div>

<div class="final-box">
    사용 가능 코스트:
    <span style="color:@(AvailableCost < 0 ? "red" : "green")">@AvailableCost</span>
</div>

@code {
    private int LeaderLevel = 1;
    private int Damage = 0;

    private int UnitCost1 = 0;
    private int UnitCost2 = 0;
    private int UnitCost3 = 0;
    private int SkillCost = 0;
    private int WeaponCost = 0;

    private string CurrentLeaderImage =>
        LeaderLevel < 10 ? "img/leader_front.jpg" : "img/leader_back.jpg";

    private int TotalSize => LeaderLevel + Damage;
    private int Cost => UnitCost1 + UnitCost2 + UnitCost3 + SkillCost + WeaponCost;
    private int AvailableCost => TotalSize - Cost;
}
